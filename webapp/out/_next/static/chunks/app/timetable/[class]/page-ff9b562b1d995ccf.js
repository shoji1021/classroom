(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{895:function(e,o,c){Promise.resolve().then(c.bind(c,2323))},2323:function(e,o,c){"use strict";c.d(o,{default:function(){return u}});var t=c(7437),r=c(9376),a=c(2265);function l(e){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var t in c)e[t]=c[t]}return e}var i=function e(o,c){function t(e,t,r){if("undefined"!=typeof document){"number"==typeof(r=l({},c,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in r)r[i]&&(a+="; "+i,!0!==r[i]&&(a+="="+r[i].split(";")[0]));return document.cookie=e+"="+o.write(t,e)+a}}return Object.create({set:t,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var c=document.cookie?document.cookie.split("; "):[],t={},r=0;r<c.length;r++){var a=c[r].split("="),l=a.slice(1).join("=");try{var i=decodeURIComponent(a[0]);if(t[i]=o.read(l,i),e===i)break}catch(e){}}return e?t[e]:t}},remove:function(e,o){t(e,"",l({},o,{expires:-1}))},withAttributes:function(o){return e(this.converter,l({},this.attributes,o))},withConverter:function(o){return e(l({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(o)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),n=JSON.parse('{"1F":{"月":[],"火":[],"水":[],"木":[],"金":[]},"1M":{"月":[],"火":[],"水":[],"木":[],"金":[]},"2F":{"月":[{"period":0,"subject":"情報プロ","location":"","color":"green"},{"period":1,"subject":"情報セキュ","location":"PG","color":"orange"},{"period":2,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"blue","color2":"purple"},{"period":3,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"blue","color2":"purple"},{"period":4,"subject":"コンテンツ/ ネットワーク","location":"MM / PG,NW","color":"cyan","color2":"blue"},{"period":5,"subject":"歴史総合","location":"","color":"gray"}],"火":[{"period":0,"subject":"情報テク","location":"DS","color":"blue"},{"period":1,"subject":"家庭基礎","location":"","color":"gray"},{"period":2,"subject":"家庭基礎","location":"","color":"gray"},{"period":3,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"cyan","color2":"purple"},{"period":4,"subject":"数学A","location":"","color":"gray"},{"period":5,"subject":"歴史総合","location":"","color":"gray"}],"水":[{"period":0,"subject":"情報セキュ","location":"PG","color":"orange"},{"period":1,"subject":"体育Ⅱ","location":"体育館","color":"gray"},{"period":2,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"cyan","color2":"purple"},{"period":3,"subject":"LHR","location":"","color":"gray"},{"period":4,"subject":"データベース/ メディア","location":"SY / MM","color":"red","color2":"yellow"},{"period":5,"subject":"数学A","location":"","color":"gray"}],"木":[{"period":0,"subject":"物理基礎","location":"","color":"gray"},{"period":1,"subject":"保健Ⅱ","location":"","color":"gray"},{"period":2,"subject":"体育Ⅱ","location":"体育館","color":"gray"},{"period":3,"subject":"言語文化","location":"","color":"gray"},{"period":4,"subject":"情報実習","location":"PG","color":"gray"},{"period":5,"subject":"情報実習","location":"PG","color":"gray"}],"金":[{"period":0,"subject":"物理基礎","location":"","color":"gray"},{"period":1,"subject":"言語文化","location":"","color":"gray"},{"period":2,"subject":"情報プロ","location":"SY","color":"green"},{"period":3,"subject":"情報テク","location":"DS","color":"blue"},{"period":4,"subject":"データベース/ メディア","location":"SY / MM","color":"red","color2":"yellow"},{"period":5,"subject":"コンテンツ/ ネットワーク","location":"MM / PG,NW","color":"cyan","color2":"blue"}]},"2M":{"月":[{"period":0,"subject":"数学A","location":"","color":"gray"},{"period":1,"subject":"歴史総合","location":"","color":"gray"},{"period":2,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"blue","color2":"purple"},{"period":3,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"blue","color2":"purple"},{"period":4,"subject":"情報テク","location":"DS","color":"blue"},{"period":5,"subject":"情報セキュ","location":"PG","color":"orange"}],"火":[{"period":0,"subject":"データベース/ メディア","location":"SY / MM","color":"red","color2":"yellow"},{"period":1,"subject":"コンテンツ/ ネットワーク","location":"MM / PG,NW","color":"cyan","color2":"blue"},{"period":2,"subject":"言語文化","location":"","color":"gray"},{"period":3,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"cyan","color2":"purple"},{"period":4,"subject":"体育Ⅱ","location":"体育館","color":"gray"},{"period":5,"subject":"物理基礎","location":"","color":"gray"}],"水":[{"period":0,"subject":"数学A","location":"","color":"gray"},{"period":1,"subject":"データベース/ メディア","location":"SY / MM","color":"red","color2":"yellow"},{"period":2,"subject":"数学Ⅱ/英語Ⅱ","location":"/プロA,B","color":"cyan","color2":"purple"},{"period":3,"subject":"LHR","location":"","color":"gray"},{"period":4,"subject":"言語文化","location":"","color":"gray"},{"period":5,"subject":"情報プロ","location":"","color":"green"}],"木":[{"period":0,"subject":"情報実習","location":"PG","color":"gray"},{"period":1,"subject":"情報実習","location":"PG","color":"gray"},{"period":2,"subject":"家庭基礎","location":"","color":"gray"},{"period":3,"subject":"家庭基礎","location":"","color":"gray"},{"period":4,"subject":"体育Ⅱ","location":"体育館","color":"gray"},{"period":5,"subject":"保健Ⅱ","location":"","color":"gray"}],"金":[{"period":0,"subject":"コンテンツ/ ネットワーク","location":"MM / PG,NW","color":"cyan","color2":"blue"},{"period":1,"subject":"歴史総合","location":"","color":"gray"},{"period":2,"subject":"情報セキュ","location":"PG","color":"orange"},{"period":3,"subject":"情報プロ","location":"SY","color":"green"},{"period":4,"subject":"物理基礎","location":"","color":"gray"},{"period":5,"subject":"情報テク","location":"DS","color":"blue"}]},"3F":{"月":[],"火":[],"水":[],"木":[],"金":[]},"3M":{"月":[],"火":[],"水":[],"木":[],"金":[]}}'),s=c(8656),d=c.n(s);function u(e){let{className:o}=e,c=(0,r.useRouter)(),[l,s]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[g,b]=(0,a.useState)({specialty:"system",language:"math"}),[_,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=i.get("courseSelection");if(e)try{let o=JSON.parse(e);b(o)}catch(e){console.error("Cookieのパースに失敗しました:",e)}j(!0)},[]),(0,a.useEffect)(()=>{_&&i.set("courseSelection",JSON.stringify(g),{expires:365})},[g,_]),(0,a.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/changes",{cache:"no-store"});if(!e.ok)throw Error("授業変更データの取得に失敗しました");let o=await e.json();if(console.log("APIから取得成功:",o.length,"件"),p(o),o.length>0){let e=o.reduce((e,o)=>o.date>e?o.date:e,o[0].date),c=new Date(e);m(c)}else y()}catch(e){console.error("授業変更の読み込み失敗:",e),p([]),y()}},y=()=>{let e=new Date,o=[],c=0,t=0;for(;c<5;){let r=new Date(e);r.setDate(e.getDate()+t);let a=r.getDay();0!==a&&6!==a&&(o.push(r),c++),t++}s(o)},m=e=>{let o=new Date,c=[],t=0;for(;;){let r=new Date(o);r.setDate(o.getDate()+t);let a=r.getDay();if(0!==a&&6!==a&&c.push(r),r>e)break;t++}s(c)},f=e=>["日","月","火","水","木","金","土"][e.getDay()],v=e=>{let o=e.getMonth()+1,c=e.getDate();return"".concat(o,"月").concat(c,"日")},S=e=>{let c=n[o];return c&&c[e]?c[e].map(e=>{let o=e.subject,c=e.location;if(o.includes("データベース")&&o.includes("メディア")){if(o="system"===g.specialty?"データベース":"メディア",c&&c.includes("/")){let[e,o]=c.split("/").map(e=>e.trim());c="system"===g.specialty?e:o}}else if(o.includes("コンテンツ")&&o.includes("ネットワーク")){if(o="design"===g.specialty?"コンテンツ":"ネットワーク",c&&c.includes("/")){let[e,o]=c.split("/").map(e=>e.trim());c="design"===g.specialty?e:o}}else if(o.includes("数学")&&o.includes("英語")&&(o="math"===g.language?"数学Ⅱ":"英語Ⅱ",c&&c.includes("/"))){let[e,o]=c.split("/").map(e=>e.trim());c="math"===g.language?e:o}return{...e,subject:o,location:c}}):[]},N=(e,c)=>{let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),l="".concat(t,"-").concat(r,"-").concat(a);return u.find(e=>e.date===l&&e.classYear===o&&e.period===c)},x=e=>{let c=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a="".concat(c,"-").concat(t,"-").concat(r);return u.filter(e=>e.date===a&&e.classYear===o).length>=5},w=e=>{let c=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a="".concat(c,"-").concat(t,"-").concat(r);return u.filter(e=>e.date===a&&e.classYear===o).some(e=>{var o,c,t,r,a;return(null===(o=e.newSubject)||void 0===o?void 0:o.includes("自宅学習"))||(null===(c=e.newSubject)||void 0===c?void 0:c.includes("休み"))||(null===(t=e.newSubject)||void 0===t?void 0:t.includes("なし"))||(null===(r=e.description)||void 0===r?void 0:r.includes("自宅学習"))||(null===(a=e.description)||void 0===a?void 0:a.includes("休み"))})},D=e=>{let c=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a="".concat(c,"-").concat(t,"-").concat(r);return u.some(e=>e.date===a&&e.classYear===o)},B=e=>"".concat(e+1,"h");return(0,t.jsxs)("div",{className:d().container,children:[(0,t.jsxs)("header",{className:d().header,children:[(0,t.jsx)("button",{className:d().backButton,onClick:()=>c.push("/"),children:"← 戻る"}),(0,t.jsxs)("h1",{className:d().title,children:[o," - 時間割"]}),(0,t.jsxs)("div",{className:d().courseSelector,children:[(0,t.jsxs)("div",{className:d().buttonGroup,children:[(0,t.jsx)("button",{className:"".concat(d().courseButton," ").concat("system"===g.specialty?d().active:""),onClick:()=>b({...g,specialty:"system"}),children:"システム"}),(0,t.jsx)("button",{className:"".concat(d().courseButton," ").concat("design"===g.specialty?d().active:""),onClick:()=>b({...g,specialty:"design"}),children:"デザイン"})]}),(0,t.jsxs)("div",{className:d().buttonGroup,children:[(0,t.jsx)("button",{className:"".concat(d().courseButton," ").concat("math"===g.language?d().active:""),onClick:()=>b({...g,language:"math"}),children:"数学"}),(0,t.jsx)("button",{className:"".concat(d().courseButton," ").concat("english"===g.language?d().active:""),onClick:()=>b({...g,language:"english"}),children:"英語"})]})]})]}),(0,t.jsx)("div",{className:d().timetableWrapper,children:(0,t.jsxs)("div",{className:d().timetable,style:{gridTemplateColumns:"80px repeat(".concat(l.length,", 1fr)")},children:[(0,t.jsxs)("div",{className:d().headerRow,children:[(0,t.jsx)("div",{className:d().periodHeader,children:"時間割"}),l.map((e,o)=>{let c=f(e),r=w(e),a=x(e),l=D(e),i=null;return r?i=(0,t.jsx)("div",{className:d().fullDayBadge,children:"休み"}):a?i=(0,t.jsx)("div",{className:d().fullDayBadge,children:"全日変更"}):l&&(i=(0,t.jsx)("div",{className:d().changeBadge,children:"変更あり"})),(0,t.jsxs)("div",{className:"".concat(d().dayHeader," ").concat(r?d().fullDayHeader:""),children:[i,(0,t.jsx)("div",{className:d().weekday,children:c}),(0,t.jsx)("div",{className:d().date,children:v(e)})]},o)})]}),[0,1,2,3,4,5,6].map(e=>(0,t.jsxs)("div",{className:d().periodRow,children:[(0,t.jsx)("div",{className:d().periodLabel,children:B(e)}),l.map((c,r)=>{let a=f(c),l=S(a).find(o=>o.period===e),i=N(c,e),s=n[o][a],u=null==s?void 0:s.find(o=>o.period===e);if(!l)return(0,t.jsx)("div",{className:d().emptyPeriod},r);let p=l.color;if(null==u?void 0:u.color2){let e=u.subject;e.includes("データベース")&&e.includes("メディア")?p="system"===g.specialty?u.color:u.color2:e.includes("コンテンツ")&&e.includes("ネットワーク")?p="design"===g.specialty?u.color:u.color2:e.includes("数学")&&e.includes("英語")&&(p="math"===g.language?u.color:u.color2)}let b={background:"var(--color-".concat(p,")")};return(0,t.jsx)("div",{className:d().period,style:b,children:i?(0,t.jsxs)("div",{className:d().changedSubject,children:[(0,t.jsx)("div",{className:d().originalSubject,children:l.subject}),(0,t.jsx)("div",{className:d().arrow,children:"↓"}),(0,t.jsx)("div",{className:d().newSubject,children:i.newSubject})]}):(0,t.jsxs)("div",{className:d().subjectName,children:[l.subject,l.location&&(0,t.jsx)("div",{className:d().location,children:l.location})]})},r)})]},e))]})}),u.length>0&&(0,t.jsxs)("div",{className:d().changesSection,children:[(0,t.jsx)("h2",{children:"授業変更情報"}),(0,t.jsx)("ul",{className:d().changesList,children:Array.from(new Set(u.filter(e=>e.classYear===o||e.description.includes(o)||e.description.includes("全学年")).map(e=>e.description))).map(e=>(0,t.jsx)("li",{className:d().changeItem,children:e},e))})]})]})}},9376:function(e,o,c){"use strict";var t=c(5475);c.o(t,"useRouter")&&c.d(o,{useRouter:function(){return t.useRouter}})},8656:function(e){e.exports={container:"page_container__CxAN5",header:"page_header__PWd_g",backButton:"page_backButton___R40b",title:"page_title__uSzWk",courseSelector:"page_courseSelector__FUNrx",buttonGroup:"page_buttonGroup__jbx0H",courseButton:"page_courseButton__TS9RB",active:"page_active__LtGNG",timetableWrapper:"page_timetableWrapper__lcPWS",timetable:"page_timetable__vB1ny",headerRow:"page_headerRow__Xw4tu",periodHeader:"page_periodHeader__zYr5J",dayHeader:"page_dayHeader__tYlJ1",fullDayHeader:"page_fullDayHeader__oLE7n",fullDayBadge:"page_fullDayBadge__zOOoG",changeBadge:"page_changeBadge__qco5N",weekday:"page_weekday__7Zfkp",date:"page_date__E8ZVw",periodRow:"page_periodRow__tD_9m",periodLabel:"page_periodLabel__bf4NF",period:"page_period__2UsfR",emptyPeriod:"page_emptyPeriod__KgQfB",subjectName:"page_subjectName__zYzIx",location:"page_location__vd_9A",changedSubject:"page_changedSubject__nrcbh",originalSubject:"page_originalSubject___33Bv",arrow:"page_arrow__osb7o",newSubject:"page_newSubject__yBseZ","color-gray":"page_color-gray__hjVOr","color-red":"page_color-red__Nqlx9","color-yellow":"page_color-yellow__6es9r","color-cyan":"page_color-cyan__acPzD","color-blue":"page_color-blue__lU_bS","color-purple":"page_color-purple__oENa9","color-orange":"page_color-orange__sq5J7","color-green":"page_color-green__r_oqA",changesSection:"page_changesSection__TFL70",changesList:"page_changesList__q0ssU",changeItem:"page_changeItem__pTJkZ"}}},function(e){e.O(0,[651,971,117,744],function(){return e(e.s=895)}),_N_E=e.O()}]);